"use strict";if($(".main-body .page-wrapper").find("#item-list-container, #vendor-item-list-container").length&&$(".select2").select2(),$(".main-body .page-wrapper").find("#item-add-container").length||$(".main-body .page-wrapper").find("#item-edit-container").length){function a(a){$.ajax({url:SITE_URL+"/items/get-item-option",data:{item_id:a,_token:token},type:"POST",dataType:"JSON",success:function(a){$.each(a,function(a,b){let c=JSON.parse(b.payloads),d=[];$.each(c.label,function(a){d[a]={option:c.label[a],price:c.option_price[a].option_price,price_type:c.option_price_type[a],option_status:"undefined"==typeof c.option_status?null:c.option_status[a],inventory_quantity:"undefined"==typeof c.inventory_id?0:b.inventory_data[c.inventory_id[a]]}});let e={item_option_id:b.id,name:b.name,type:b.type,is_required:b.is_required,values:d};m(e,"edit")})}})}function b(){$("#is_discount_enable").is(":checked")?($("#discount_amount_lbl").addClass("require"),$("#discount_from_lbl").addClass("require"),$("#discount_to_lbl").addClass("require"),$("#discount_type_lbl").addClass("require"),$("#discount_amount").prop("required",!0),$("#discount_amount").attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$("#discount_from").prop("required",!0),$("#discount_from").attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$("#discount_to").prop("required",!0),$("#discount_to").attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$("#discount_type").prop("required",!0),$("#discount_type").attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$("#discount").show()):($("#discount_amount_lbl").removeClass("require"),$("#discount_from_lbl").removeClass("require"),$("#discount_to_lbl").removeClass("require"),$("#discount_type_lbl").removeClass("require"),$("#discount_amount").prop("required",!1),$("#discount_amount").removeAttr("oninvalid"),$("#discount_from").prop("required",!1),$("#discount_from").removeAttr("oninvalid"),$("#discount_to").prop("required",!1),$("#discount_to").removeAttr("oninvalid"),$("#discount_type").prop("required",!1),$("#discount_type").removeAttr("oninvalid"),$("#discount").hide())}function c(){$("#item-info").show(),$("#attribute_information").empty();let a=!0,b=!1;$.each($(".custom-option .card"),function(){!0==a?a=!1:$(this).remove()}),$.each($(".option_div"),function(a,c){$.each($("#"+c.id+" table>tbody>tr.option-value-rowid"),function(){let a=$(this).attr("id");!1!=b&&$("#"+c.id+" table>tbody>tr#"+a).remove(),b=!0})}),$(".labelChk").val(null),$(".priceChk").val(null),$(".price_type").val("Fixed"),$(".option_nameChk").val(null),$(".is_requiredChk").val(0),$(".typeChk").val(null),globalOption=[],createOnce=!0}function d(a){return a.charAt(0).toUpperCase()+a.slice(1)}function e(a){return a=a.toLowerCase(),a.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-")}function f(a){return a.replace(/\d+/g,"")}function g(a){$.ajax({url:SITE_URL+"/attributes/get-attribute",data:{category_id:a,_token:token},type:"POST",dataType:"JSON",success:function(b){0<b.length?($("#attributeBox").show(),h(b,"attribute_information"),i(a)):$("#attributeBox").hide()}})}function h(a,b){let c="",g=3,h=0,i="",j="",k="";$.each(a,function(a,l){0==h%g?(h++,i=`<div class="form-group row">`,j=``):i="",0==h%g&&(j=`</div>`);let m="";("dropdown"==l.type||"multiple_select"==l.type)&&(m=`<option value="">${jsLang("Select One")}</option>`,$.each(l.values,function(a,b){m+=`<option value="${b.value}">${b.value}</option>`})),"dropdown"==l.type?k=`<select class="form-control errorChk ${b} ${1==l.is_required?"attribute_require":""}" id="${e(l.name)}-${attributeRowId}" name="attribute_data[${l.id}]">
                          ${m}
                        </select>
                        <span id="value-${e(l.name)}-${attributeRowId++}" class="validationMsg"></span>
                        `:"field"==l.type?k=`<input type="text" class="form-control errorChk ${b} ${1==l.is_required?"attribute_require":""}" id="${e(l.name)}-${attributeRowId}" name="attribute_data[${l.id}]">
                       <span id="value-${e(l.name)}-${attributeRowId++}" class="validationMsg"></span>
                       `:"multiple_select"==l.type?k=`<select class="js-example-basic-multiple errorChk selectMultiple ${b} ${1==l.is_required?"attribute_require":""}" id="${e(l.name)}-${attributeRowId}" name="attribute_data[${l.id}][]" multiple="multiple">
                          ${m}
                        </select>
                         <span id="value-${e(l.name)}-${attributeRowId++}" class="validationMsg"></span>
                       `:"checkbox"==l.type&&($.each(l.values,function(a,c){m+=`
                                   <div class="form-group d-inline">
                                        <div class="checkbox d-inline">
                                            <input type="checkbox" class="${b} ${1==l.is_required?"attribute_require":""} ${f(e(l.name))}" name="${e(c.value)}" id="${e(l.name)}_${a}">
                                            <label for="${e(l.name)}_${a}" class="cr">${d(c.value)}</label>
                                        </div>
                                   </div>
                                         `,k=m}),k+=`<span id="value-${e(l.name)}_" class="validationMsg"></span>`),c+=`
                            ${i}

                            <div class="col-sm-4">
                                <label for="${l.name}" class="control-label ${1==l.is_required?"require":""}"> ${d(25<l.name.length?l.name.substring(0,25)+"..":l.name)} ${null!=l.explain&&0<l.explain.length?`<i id="bottom-toolbar-${attributeRowId}" class="fas fa-question-circle bottom-toolbar" data-toggle="popover" data-placement="bottom" data-content="${l.explain}"></i>`:""} </label>
                                ${k}
                            </div>

                            ${j}
                         `}),$("#"+b).append(c),$("[data-toggle=\"popover\"]").popover(),$(".selectMultiple").select2()}function i(a){$.ajax({url:SITE_URL+"/options/get-option",data:{category_id:a,_token:token},type:"POST",dataType:"JSON",success:function(a){$("#global_option").find("option").not(":first").remove(),$.each(a,function(a,b){$("#global_option").append($("<option>",{value:b.id,text:b.name})),globalOption[b.id]={id:b.id,name:b.name,type:b.type,is_required:b.is_required,values:b.values}})}})}function j(a,b){0<a.length?($("#option_div-"+b).show(),"field"==a||"textarea"==a||"date"==a||"date_time"==a||"time"==a?k(b):l(b)):$("#option_div-"+b).hide()}function k(a){let b=!1;isLabelHide[a]=!0,$.each($("#option_div-"+a+" table>tbody>tr.option-value-rowid"),function(){let c=$(this).attr("id");!1!=b&&$("#option_div-"+a+" table>tbody>tr#"+c).remove(),b=!0}),$("#option_div-"+a+" table>thead>tr>th.bar").hide(),$("#option_div-"+a+" table>thead>tr>th.label").hide(),$("#option_div-"+a+" table>thead>tr>th.delete").hide(),$("#option_div-"+a+" table>tbody>tr>td.bar").hide(),$("#option_div-"+a+" table>tbody>tr>td.label").hide(),$("#option_div-"+a+" table>tbody>tr>td.delete").hide(),$("#option_div-"+a+" #add-new-option-value-"+a).hide()}function l(a){isLabelHide[a]=!1,$("#option_div-"+a+" table>thead>tr>th.bar").show(),$("#option_div-"+a+" table>thead>tr>th.label").show(),$("#option_div-"+a+" table>thead>tr>th.delete").show(),$("#option_div-"+a+" table>tbody>tr>td.bar").show(),$("#option_div-"+a+" table>tbody>tr>td.label").show(),$("#option_div-"+a+" table>tbody>tr>td.delete").show(),$("#option_div-"+a+" #add-new-option-value-"+a).show()}function m(a=null,b="create"){optionValueRow=1;let c=null==a?null:a.values,d=`
                       <div class="accordion custom-option" id="accordionExample-${optionRowId}">
                         <div class="mt-2" id="custom-option-${optionRowId}">
                            <div id="collapse-${optionRowId}" class="card-body custom-pad collapse show" aria-labelledby="headingOne" data-parent="#accordionExample-${optionRowId}">
                                <div class="col-sm-12">
                                    <div class="row border">
                                       <div class="col-sm-4 mt-3">
                                           <div class="form-group row">

                                                <div class="col-sm-1">
                                                    <label for="option_name" class="control-label mt-1"><i class="fa fa-arrows-alt drag-color" aria-hidden="true"></i>
                                                    </label>
                                                </div>

                                                <div class="col-sm-3">
                                                    <label for="option_name" class="col-sm-4 mL-15 control-label require">${jsLang("Name")}</label>
                                                </div>
                                               <div class="col-sm-7">
                                                   <input type="text" placeholder="${jsLang("Name")}" class="form-control errorChk option_nameChk" id="option_nameChk-${optionRowId}" name="option_data[${optionRowId}][option_name]" value="${null==a?"":a.name}" ${null!=a&&"Color"==a.name||null!=a&&"Size"==a.name?"readonly":""}>
                                                   <span id="value-option_name-${optionRowId}" class="validationMsg"></span>
                                               </div>
                                           </div>
                                       </div>
                                       <input type="hidden" name="option_row_identify[]" value="${optionRowId}">
                                       ${"edit"==b&&null!=a?`<input type="hidden" name="option_data[${optionRowId}][item_option_id]" value="${a.item_option_id}">`:""}
                                        <div class="col-sm-4 mt-3">
                                            <div class="form-group row">
                                                <label for="type" class="col-sm-4 control-label require">${jsLang("Type")}</label>
                                                <div class="col-sm-8">
                                                    <select class="js-example-basic-single form-control errorChk typeChk" id="typeChk-${optionRowId}" name="option_data[${optionRowId}][type]" data-select-id=${optionRowId}>
                                                            <option value="" selected="">${jsLang("Select One")}</option>
                                                            <option value="dropdown" ${null!=a&&"dropdown"==a.type?"selected":""}>${jsLang("Dropdown")}</option>
                                                    </select>
                                                    <span id="value-option_type-${optionRowId}" class="validationMsg"></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-3 mt-3">
                                            <div class="form-group row">
                                                <label for="is_required" class="col-sm-5 control-label">${jsLang("Required")}</label>
                                                <div class="col-sm-7">
                                                    <select class="form-control is_requiredChk" name="option_data[${optionRowId}][is_required]" id="is_requiredChk-${optionRowId}">
                                                        <option value="0" ${null!=a&&0==a.is_required?"selected":""}>${jsLang("No")}</option>
                                                        <option value="1" ${null!=a&&1==a.is_required?"selected":""}>${jsLang("Yes")}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-1 mt-3">
                                            <div class="form-group row">
                                                <div class="col-sm-12 margin-top-1p text-center">
                                                    <a type="button" id="delete-option-${optionRowId}" class="del-btn delete-option-row" data-row-id=${optionRowId} data-toggle="tooltip" data-title="Delete Value" data-original-title="" title="" data-globalId = "${null!=a&&"undefined"!=typeof a.id?a.id:""}">
                                                        <i class="feather icon-trash-2"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="custom-option-value-1">
                                  <div class="table-responsive option_div" id="option_div-${optionRowId}">
                                    <table class="options table table-bordered">
                                        <thead class="t-head">
                                        <tr>
                                            <th class="label">${jsLang("Label")}</th>
                                            <th>${jsLang("Price")}</th>
                                            <th class="option_qty">${jsLang("Quantity")}</th>
                                            <th>${jsLang("Price type")}</th>
                                            <th>${jsLang("Status")}</th>
                                            <th class="delete custom-width">
                                                <a type="button" class="text-center font_12 add-new-option-value color_848484" id="add-new-option-value-${optionRowId}" data-row-id=${optionValueRow} data-div-id=${optionRowId}><i class="fas fa-plus"></i> ${jsLang("Add")}</a>
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody id="option-values-${optionRowId}" class="drag_and_drop">

                                        </tbody>
                                    </table>
                                </div>
                                </div>
                            </div>
                      </div>
                       </div>
                        `;$("#new_option").append(d),n(optionRowId,c),null==a?$("#option_div-"+optionRowId).hide():"",optionRowId++}function n(a,b=null){inputIndexValue=a;let c="";null==b?(++optionValueRow,c=o()):$.each(b,function(a,b){++optionValueRow,c+=o(b)}),$("#option-values-"+a).append(c),j($("#typeChk-"+a).val(),$("#typeChk-"+a).attr("data-select-id")),p(".drag_and_drop"),v()}function o(a=null){return`
           <tr draggable="false" id="option-value-rowid-${optionValueRow}" class="option-value-rowid">
                <td class="label">
                    <div class="d-flex">
                        <i class="fa fa-arrows-alt drag-color mt-2 pr-3" aria-hidden="true"></i>
                        <input type="text" name="option_data[${inputIndexValue}][label][]" value="${null!=a&&null!=a.option?a.option:""}" class="form-control errorChk labelChk" id="labelChk-${optionValueRow}">
                    </div>
                    <span id="value-label-${optionValueRow}" class="validationMsg value-label ml-27px"></span>
                </td>
                <td>
                    <input type="text" name="option_data[${inputIndexValue}][option_price][]" value="${null==a?"":a.price}" class="form-control errorChk positive-float-number priceChk" maxlength="8" id="priceChk-${optionValueRow}">
                    <span id="value-price-${optionValueRow}" class="validationMsg value-price"></span>
                </td>
                <td class="option_qty">
                    <input type="text" name="option_data[${inputIndexValue}][option_qty][]" value="${null!=a&&"undefined"!=typeof a.inventory_quantity?a.inventory_quantity:0}" class="form-control errorChk positive-float-number inventory_qty" maxlength="10">
                    <span id="value-qty-${optionValueRow}" class="validationMsg value-qty"></span>
                </td>
                <td>
                    <select class="form-control price_type" name="option_data[${inputIndexValue}][option_price_type][]" id="price_type">
                        <option value="Fixed" ${null!=a&&"Fixed"==a.price_type?"selected":""}>${jsLang("Fixed")}</option>
                        <option value="Percent" ${null!=a&&"Percent"==a.price_type?"selected":""}>${jsLang("Percent")}</option>
                    </select>
                </td>
                <td>
                    <select class="form-control" name="option_data[${inputIndexValue}][option_status][]" id="option_status">
                        <option value="Active" ${null!=a&&"Active"==a.option_status?"selected":""}>${jsLang("Active")}</option>
                        <option value="Inactive" ${null!=a&&"Inactive"==a.option_status?"selected":""}>${jsLang("Inactive")}</option>
                    </select>
                </td>
                <td class="text-center delete">
                    <a type="button" id="delete-option-value-${optionValueRow}" class="del-btn delete-option-value-row" data-row-id=${optionValueRow} data-div-id=${optionRowId} data-toggle="tooltip" data-title="Delete Value" data-original-title="" title="">
                        <i class="feather icon-trash-2"></i>
                    </a>
                </td>
            </tr>
        `}function p(a){$(a).sortable({distance:2,delay:300,opacity:.8,cursor:"move"})}function q(a=!1){let b=0,c=0,d=0,e=1,f=0,g=0,h=0,j=0,k=0,l=0,m=$("input[name='option_row_identify[]']").map(function(){return $(this).val()}).get();for(let n=0;n<m.length;n++){if($.each($("#option_nameChk-"+m[n]),function(){b=$(this).val()?1:0,c=$("#typeChk-"+m[n]).val()?1:0,1==b&&1==c&&$.each($("#option_div-"+m[n]+" table>tbody>tr.option-value-rowid"),function(){if(!1==isLabelHide[m[n]]){let a=$(this).closest("tr").find(".labelChk").val();e=0<a.length?1:0}let a=$(this).closest("tr").find(".priceChk").val(),b=$(this).closest("tr").find(".inventory_qty").val();return(f=0<a.length?1:0,k=$("#track_inventory").is(":checked")?0<b.length&&0<b?1:0:1,0==e)?($(this).closest("tr").find(".labelChk").addClass("err1"),$(this).closest("tr").find(".value-label").text(jsLang("This field is required.")),h=3,!1):($(this).closest("tr").find(".labelChk").removeClass("err1"),$(this).closest("tr").find(".value-label").text(""),h=0,0==f?($(this).closest("tr").find(".priceChk").addClass("err1"),$(this).closest("tr").find(".value-price").text(jsLang("This field is required.")),j=3,!1):($(this).closest("tr").find(".priceChk").removeClass("err1"),$(this).closest("tr").find(".value-price").text(""),j=0,0==k?($(this).closest("tr").find(".inventory_qty").addClass("err1"),$(this).closest("tr").find(".value-qty").text(jsLang("required & more than 0.")),l=3,!1):void($(this).closest("tr").find(".inventory_qty").removeClass("err1"),$(this).closest("tr").find(".value-qty").text(""),l=0)))})}),3==j||3==h||3==l)return!1;if(0!=b)$("#option_nameChk-"+m[n]).removeClass("err1"),$("#value-option_name-"+m[n]).text(""),d=0;else if($("#option_nameChk-"+m[n]).addClass("err1"),$("#value-option_name-"+m[n]).text(jsLang("This field is required.")),d=1,!1==a)break;if(0!=c)$("#typeChk-"+m[n]).removeClass("err1"),$("#value-option_type-"+m[n]).text(""),g=0;else if($("#typeChk-"+m[n]).addClass("err1"),$("#value-option_type-"+m[n]).text(jsLang("This field is required.")),g=1,!1==a)break}return 0==d&&0==g&&0==h&&0==j}function r(a=!1){let b="",c=1;return $(".attribute_require").each(function(){b=$(this).attr("id");let d=$("#"+b).val();if(!(0>=d.length)){if(50<d.length){$("#"+b).addClass("err1");var e=jsLang("The value not more than :x characters long.");return e=e.replace(":x",50),$("#value-"+b).text(e),c=0,!1}$("#"+b).removeClass("err1"),$("#value-"+b).text("")}else if($("#"+b).addClass("err1"),$("#value-"+b).text(jsLang("This field is required.")),c=0,!1==a)return!1}),0!=c}function s(){return parseInt($("#discount_amount").val())>parseInt($("#price").val())&&"Percent"!=discountType?($("#discount_amount").addClass("err1"),$("#discount-amount-error").text(jsLang("Discount amount not more than actual price.")),!1):100<parseInt($("#discount_amount").val())&&"Percent"==discountType?($("#discount_amount").addClass("err1"),$("#discount-amount-error").text(jsLang("Discount percent not more than 100")),!1):($("#discount_amount").removeClass("err1"),$("#discount-amount-error").text(""),!0)}function t(){$("html, body").animate({scrollTop:$(".err1").offset().top},1e3)}function u(a){"No Warranty"==a?($("#warranty_period").prop("disabled","disabled"),$("#warranty_period_lbl").removeClass("require"),$("#warranty_period").prop("required",!1),$("#warranty_period").removeAttr("oninvalid"),$("#warranty_policy").attr("readonly",!0)):($("#warranty_period").prop("disabled",!1),$("#warranty_period_lbl").addClass("require"),$("#warranty_period").prop("required",!0),$("#warranty_period").attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$("#warranty_policy").attr("readonly",!1))}function v(){$("#track_inventory").is(":checked")?$(".option_qty").show():$(".option_qty").hide()}function w(a){return Math.round(a)}var action="create",optionRowId=2;if(b(),u($("#warranty_type").val()),$(".main-body .page-wrapper").find("#item-add-container").length&&($("#attributeBox").hide(),$(".sideBar").hide()),$(".main-body .page-wrapper").find("#item-edit-container").length&&(action="edit",optionRowId=1,0<parseInt($("#cateAttLen").val())?$("#attributeBox").show():$("#attributeBox").hide()),$("#summernote").summernote({tabsize:2,height:120,toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link"]],["view",["codeview","help"]]]}),$(document).on("change",".errorChk",function(){if($(this).hasClass("err1")&&""!=$(this).val){$(this).removeClass("err1");let a=$(this).attr("id");$("#"+a).next("span").text("")}}),$(".select2").select2({placeholder:jsLang("Nothing selected"),allowClear:!0}),$("#item_tags").select2({tags:!0}),"edit"==action){let b=$("#category_id").val(),c=$("#name").attr("data-item_id");i(b),a(c);let d=$("#available_from").val(),e=$("#available_to").val(),f=$("#discount_from").val(),g=$("#discount_to").val();$("#available_from").daterangepicker(selectFromTo(0<d.length?d:null)),$("#available_from").on("change",function(){$("#available_to").daterangepicker(selectFromTo($(this).val(),"to")),$("#available_to").val("")}),$("#available_to").daterangepicker(selectFromTo(0<e.length?e:null)),0>=d.length?$("#available_from").val(""):"",0>=e.length?$("#available_to").val(""):"",$("#discount_from").daterangepicker(selectFromTo(0<f.length?f:null)),$("#discount_from").on("change",function(){$("#discount_to").daterangepicker(selectFromTo($(this).val(),"to")),$("#discount_to").val("")}),$("#discount_to").daterangepicker(selectFromTo(0<g.length?g:null)),0>=f.length?$("#discount_from").val(""):"",0>=g.length?$("#discount_to").val(""):""}"create"==action&&($("#available_from").on("change",function(){$("#available_to").daterangepicker(selectFromTo($(this).val(),"to")),$("#available_to").val("")}),$("#discount_from").on("change",function(){$("#discount_to").daterangepicker(selectFromTo($(this).val(),"to")),$("#discount_to").val("")}),$(".start_date, .end_date").daterangepicker(selectFromTo()),$(".start_date").val(""),$(".end_date").val(""));var createOnce=!0,isLabelHide=[];isLabelHide[0]=!1;var optionValueRow=1,attributeRowId=1,globalOption=[],inputIndexValue=1,once=!1,discountType=$("#discount_type").val();"create"==action?$("#item-info").hide():"","create"==action?j($("#typeChk-1").val(),$("#typeChk-1").attr("data-select-id")):"",$("#category_id").change(function(){c();let a=$("#category_id").val();g(a),$(".sideBar").show()}),$("#discount_type").change(function(){discountType=$(this).val()}),$("#is_discount_enable").on("change",function(){b()}),$("#discount_amount, #discount_type, #price").on("change",function(){let a=parseFloat($("#discount_amount").val()),b=parseFloat($("#price").val()),c=$("#discount_type").val();$("#is_discount_enable").is(":checked")&&$.isNumeric(a)&&0<b&&""!=c?"Flat"==c?$("#discount_price").val(b-a):"Percent"==c&&$("#discount_price").val(b-a*b/100):$("#discount_price").val(null)}),$(document).on("change",".typeChk",function(){let a=$(this).attr("data-select-id"),b=$(this).attr("id"),c=$(this).val();j(c,a),v()}),$(document).on("click",".delete-option-value-row",function(a){a.preventDefault(),$(this).closest("tr").remove()}),$(document).on("click",".delete-option-row",function(a){a.preventDefault();let b=$(this).attr("data-row-id");$("#custom-option-"+b).remove();let c=$(this).attr("data-globalid");$.each($("#global_option option"),function(){$(this).val()==c&&$(this).removeAttr("disabled")})}),$(document).on("click","#add-new-option",function(a){a.preventDefault(),m()}),$(document).on("click",".add-new-option-value",function(a){a.preventDefault();let b=$(this).attr("data-row-id"),c=$(this).attr("data-div-id");inputIndexValue=c,n(c)}),p(".drag_and_drop"),$(document).on("click","#add-new-option-global",function(a){a.preventDefault();let b=$("#global_option").val();0<b.length&&(m(globalOption[b]),$("#global_option option:selected").attr("disabled","disabled"))}),$("#itemForm").on("submit",function(a){!0==s()?!0==r()?!1==q()?(t(),a.preventDefault()):($("#spinnerText").text(jsLang("Please wait...")),$(".spinner").css({display:"inline-block","line-height":"0"}),$("#btnSubmit").attr("disabled",!0)):(t(),a.preventDefault()):(t(),a.preventDefault())}),$(document).on("click","#btnSubmit",function(){once=!0;r(!0),q(!0)}),$("#warranty_type").change(function(){u($(this).val())}),$("#track_inventory").change(function(){v()}),$(document).on("change",".inventory_qty",function(){let a=$(this).val();a=w(a),$(this).val(a)})}if($(".main-body .page-wrapper").find("#item-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/items/"+this.id}),$(".main-body .page-wrapper").find("#vendor-item-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/items/"+this.id}),$(".main-body .page-wrapper").find("#item-view-container").length){function a(a,b,c){let d=`
                        <tr class="relate-item-value-rowid">
                            <td>
                                <span> ${b.value} </span>
                            </td>
                            <td>
                                <span> ${b.item_code} </span>
                            </td>
                            <td>
                               <span> ${null==b.sku?"":b.sku} </span>
                               <input type="hidden" value="${b.id}" name="related_item_id[]">
                            </td>
                            <td class="text-center delete">
                                <button type="button" class="btn btn-xs btn-danger delete-item-value-row" data-itemId="${b.id}" data-type="${a}" data-toggle="tooltip" data-title="Delete Value" data-original-title="" title="">
                                    <i class="feather icon-trash-2"></i>
                                </button>
                            </td>
                        </tr>
                     `;"relate"==a?preVDuplicateRelate[b.id]=b.value:"cross"==a?preVDuplicateCross[b.id]=b.value:"up"==a&&(preVDuplicateUp[b.id]=b.value),$(c).append(d)}function b(a=null,b=null,c=null,d=null,e=null){let f=$(d).val(),g=$("#item_id").val();$.ajax({url:c,dataType:"json",type:"POST",data:{_token:token,search:f,item_id:g},success:function(a){if(1==a.status_no){var a=a.item;$(e).css("display","none"),b($.map(a,function(a){return{id:a.id,value:a.name,item_code:a.item_code,sku:a.sku}}))}else $(".ui-menu-item").remove(),$(e).css("top",$(d).position().top+35),$(e).css("left",$(d).position().left),$(e).css("width",$(d).width()),$(e).css("display","block")}})}function c(a,b){"relate"==a?delete preVDuplicateRelate[b]:"cross"==a?delete preVDuplicateCross[b]:"up"==a&&delete preVDuplicateUp[b]}function d(){0<$("#item_data tr").length?$("#related-item-table").show():$("#select_first_related").show(),0<$("#item_data_cross tr").length?$("#cross-item-table").show():$("#select_first_cross").show(),0<$("#item_data_up tr").length?$("#up-item-table").show():$("#select_first_up").show()}(function(){$("#no_div_relate").hide(),$("#no_div_cross").hide(),$("#no_div_up").hide()})(),d();var preVDuplicateRelate=[],preVDuplicateCross=[],preVDuplicateUp=[];$("#search").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(a,c){b(a,c,SITE_URL+"/items/search/relate","#search","#no_div_relate")},select:function(b,c){let d=c.item;return $("#related-item-table").show(),$("#select_first_related").hide(),"undefined"==typeof preVDuplicateRelate[d.id]&&preVDuplicateRelate[d.id]!=d.value?(a("relate",d,"#item_data"),this.value="",!1):void swal(jsLang("Already Exists!"),{icon:"error",buttons:[!1,jsLang("Ok")]})},minLength:1,autoFocus:!0}),$("#search_cross").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(a,c){b(a,c,SITE_URL+"/items/search/cross","#search_cross","#no_div_cross")},select:function(b,c){let d=c.item;return $("#cross-item-table").show(),$("#select_first_cross").hide(),"undefined"==typeof preVDuplicateCross[d.id]&&preVDuplicateCross[d.id]!=d.value?(a("cross",d,"#item_data_cross"),this.value="",!1):void swal(jsLang("Already Exists!"),{icon:"error",buttons:[!1,jsLang("Ok")]})},minLength:1,autoFocus:!0}),$("#search_up").autocomplete({delay:500,position:{my:"left top",at:"left bottom",collision:"flip"},source:function(a,c){b(a,c,SITE_URL+"/items/search/up","#search_up","#no_div_up")},select:function(b,c){let d=c.item;return $("#up-item-table").show(),$("#select_first_up").hide(),"undefined"==typeof preVDuplicateUp[d.id]&&preVDuplicateUp[d.id]!=d.value?(a("up",d,"#item_data_up"),this.value="",!1):void swal(jsLang("Already Exists!"),{icon:"error",buttons:[!1,jsLang("Ok")]})},minLength:1,autoFocus:!0}),$(document).on("click",".delete-item-value-row",function(a){a.preventDefault();let b=$(this).attr("data-type");c(b,$(this).attr("data-itemId")),$(this).closest("tr").remove(),d()}),deleteAttachment(SITE_URL+"/file/remove?type=item_option");let e=1,f=1;$.each($(".option_div"),function(){let a=$("#option-id-"+f).val();$.each($("#option_div-"+f+" table>tbody>tr.option-value-rowid"),function(){uploadAttachmentById(SITE_URL+"/file/upload?type=item_option","#uploader-text-"+e,"#add-attachments-"+e,"#dropzone-attachments-"+e,a),e++}),f++}),$(document).on("keyup","#seo_slug",function(){var a=this.value.replace(/[&\/\\#@,+()$~%.'":*?<>{}]/g,"");$("#seo_slug").val(a.trim().toLowerCase().replace(/\s/g,"-"))})}$(".main-body .page-wrapper").find("#item-import-container").length&&($("#fileRequest").on("click",function(){window.location=SITE_URL.replace("/admin","").replace("/vendor","")+"/public/dist/downloads/item_sheet.csv"}),$(".error, #note_txt_2").hide(),$("#validatedCustomFile").on("change",function(){for(var a=[],b=0;b<$(this)[0].files.length;b++)a.push($(this)[0].files[b].name);$(this).next(".custom-file-label").html(a.join(", "));var c=a.toString(),d=c.split(".").pop();-1==$.inArray(d,["csv"])?($("#note_txt_1, .error").hide(),$("#note_txt_2").show(),$("#note_txt_2").html("<h6> <span class=\"text-danger font-weight-bolder\">"+jsLang("Invalid file extension")+" </span> </h6> <span class=\"badge badge-info note-style\">"+jsLang("Note")+"</span><small class=\"text-info\"> "+jsLang("Allowed File Extensions: csv"))+"</small>"):$("#note_txt_1, #note_txt_2").hide()}),$(".search-table").on("keyup",function(){var a,b,c,d,e,f,g;for(a=$(this).val(),b=a.toUpperCase(),c=$(".myTable"),d=$(".myTable tr"),f=0;f<d.length;f++)e=d[f].querySelector(".search"),e&&(g=e.textContent||e.innerText,d[f].style.display=-1<g.toUpperCase().indexOf(b)?"":"none")}),$("#goto-optional, #goto-required").css({right:"10px",top:"100px"}),$(".require-section, .optional-section").css("overflow","hidden"),$(window).scroll(function(){var a=$(window).scrollTop();$("#goto-optional").css("top",a+100+"px");var b=$(".require-section").height();$("#goto-required").css("top",a+100-b+"px")}));
