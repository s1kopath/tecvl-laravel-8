"use strict";if($(".main-body .page-wrapper").find("#invoice-view-container").length){var maxQty=1;(function(){var a,b=0,c=0;$("#status").on("focus",function(){a=this.value}).change(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let b=$(this).val(),c={status_id:b,order_id:orderId};clickOnSave("/orders/change-status","POST",c),"Paid"==paymentStatus||finalOrderStatus!=b?$(".status").each(function(){$(this).val(b)}):$("#status").val(a)}else $("#status").val(a),swal(jsLang("Your data is safe!"))})}),$(".status").on("focus",function(){a=this.value}).change(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let b=$(this).val(),c=$(this).attr("data-id");clickOnSave("/orders/change-status","POST",{id:c,status_id:b,type:"detail"}),"Paid"!=paymentStatus&&finalOrderStatus==b&&$(this).val(a)}else $(this).val(a),swal(jsLang("Your data is safe!"))})}),$("#payment_status").on("focus",function(){a=this.value}).change(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let a=$(this).val(),b=$(this).attr("data-id"),c={order_id:orderId,payment_status:a,type:"payment"};clickOnSave("/orders/update","POST",c),paymentStatus=a}else $(this).val(a),swal(jsLang("Your data is safe!"))})}),$("#orderDate").on("focus",function(){a=this.value}).change(function(){b++,1!=b&&swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let a=$(this).val(),b={order_id:orderId,orderDate:a,type:"orderDate"};clickOnSave("/orders/update","POST",b)}else $(this).val(a),swal(jsLang("Your data is safe!"))})}),$("#user_id").on("focus",function(){a=this.value}).change(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let a=$(this).val(),b={order_id:orderId,user_id:$(this).val(),type:"userId"};clickOnSave("/orders/update","POST",b)}else $(this).val(a),swal(jsLang("Your data is safe!"))})}),$("#deliveryDate").on("focus",function(){a=this.value}).change(function(){c++,1!=c&&swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let a=$(this).val(),b={order_id:orderId,deliveryDate:a,type:"deliveryDate"};clickOnSave("/orders/update","POST",b)}else $(this).val(a),swal(jsLang("Your data is safe!"))})}),$("#updateNote").on("focus",function(){a=$("#order_note").text()}).click(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let a={order_id:orderId,note:$("#order_note").val(),type:"note"};var c=clickOnSave("/orders/update","POST",a),d=setInterval(()=>{c.responseJSON!=null&&(1==c.responseJSON.status&&($(".order-notes-container .notes").append(`
                                            <div class="order-notes mb-2">
                                                <span>${a.note}</span>
                                            </div>
                                        `),$("#order_note").val("")),clearInterval(d))},200)}else $("#order_note").val(a),swal(jsLang("Your data is safe!"))})})})();let a=$("#orderDate").val();$("#orderDate").daterangepicker(selectFromTo(0<a.length?a:null));let b=$("#deliveryDate").val();"undefined"!=typeof b&&$("#deliveryDate").daterangepicker(selectFromTo(0<b.length?b:null)),$(".select2").select2(),$(document).on("click","#refundApply",function(a){a.preventDefault();let b=$(this).attr("data-detailId");$("#order_detail_id").val(b),maxQty=parseInt($(this).attr("data-qty")),$("#refundQty").text(1),$("#refund-store").modal("show")}),$(document).on("click","#refundQtyDec",function(a){a.preventDefault();let b=parseInt($("#refundQty").text());--b,0<b&&$("#refundQty").text(b),$("#quantity_sent").val(b)}),$(document).on("click","#refundQtyInc",function(a){a.preventDefault();let b=parseInt($("#refundQty").text());++b,b<=maxQty&&$("#refundQty").text(b),$("#quantity_sent").val(b)}),$(document).on("click","#order_action_btn",function(a){a.preventDefault();let b=$("#orderAction").val();swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(a=>{if(a){let a={order_id:orderId,action_val:b,type:"orderAction"};$.ajax({type:"POST",url:SITE_URL+"/orders/update",data:{_token:token,data:a},success:function(a){1==a.status?swal(a.message,{icon:"success",buttons:[!1,jsLang("Ok")]}):typeof(a.error!=null)?swal(a.error,{icon:"error",buttons:[!1,jsLang("Ok")]}):swal(jsLang("Something went wrong, please try again."),{icon:"error",buttons:[!1,jsLang("Ok")]})}})}})}),$(".accordion").click(function(){$(this).siblings().toggle(500);var a=$(this).find(".drop-down-icon");a.hasClass("rotate-180")?(a.removeClass("rotate-180"),a.addClass("rotate-0")):(a.removeClass("rotate-0"),a.addClass("rotate-180"))})}$(".main-body .page-wrapper").find("#vendor-invoice-view-container").length&&function(){var a;$(".status").on("focus",function(){a=this.value}).change(function(){swal({title:jsLang("Are you sure?"),icon:"warning",buttons:!0,dangerMode:!0}).then(b=>{if(b){let b=$(this).val(),c=$(this).attr("data-id");clickOnSave("/orders/change-status","POST",{id:c,status_id:b}),"Paid"!=paymentStatus&&finalOrderStatus==b?$(this).val(a):finalOrderStatus==b&&"Paid"==paymentStatus&&$(this).attr("disabled","disabled")}else $(this).val(a),swal(jsLang("Your data is safe!"))})})}();
