"use strict";$(".placeholder-loader").css("display","none"),$(document).off("click",".open-view-modal").on("click",".open-view-modal",function(){$(".placeholder-loader").css("display","block"),$(".item-view-content").css("display","none"),$("#view-modal").css("display","flex");var t=$(this).attr("data-itemId");$.ajax({url:SITE_URL+"/item/quick-view/"+t,type:"GET",success:function(t){$(".placeholder-loader").css("display","none"),$(".item-view-content").css("display","block"),$("#item-view-load").html(t),$("#view-modal").css("display","flex")}})}),$(document).on("click",function(t){$(t.target).closest("#view-modal-main").length>0||$(t.target).closest(".open-view-modal").length>0||($("#view-modal").css("display","none"),$(".placeholder-loader").css("display","block"),$(".item-view-content").css("display","none"))}),$(document).on("click",".open-view-modal-close",function(t){$("#view-modal").css("display","none"),$(".placeholder-loader").css("display","block"),$(".item-view-content").css("display","none")});var mainPriceV=$("#item_priceV").text().replace(/,/g,""),amountV=[];function changePriceV(t,e,i,a,o,d=null){let c=null;if(void 0===t&&void 0!==amountV[i])null!=d?(amountV[i]-=d,c=multipleCalcV(".customCheckBoxV-"+i,o),amountV[i]=c.extra,tempAmount=calculateV()+mainPriceV,$("#item_priceV").text(null),$("#item_priceV").text(getDecimalNumberFormat(tempAmount))):($("#item_priceV").text(null),$("#item_priceV").text(getDecimalNumberFormat(tempAmount-amountV[i])),delete amountV[i]);else{t=parseFloat(t),mainPrice=parseFloat(mainPriceV);let a=0;a="Percent"==e?mainPrice*t/100:t,"checkbox_custom"==o||"multiple_select"==o||"radio_custom"==o?(c=multipleCalcV("checkbox_custom"==o||"radio_custom"==o?".customCheckBoxV-"+i:"#multipleV-"+i,o),amountV[i]=c.extra,tempAmount=calculateV()+mainPrice):(amountV[i]=a,tempAmount=calculateV()+mainPrice),$("#item_priceV").text(null),$("#item_priceV").text(getDecimalNumberFormat(tempAmount))}}function calculateV(){let t=0;for(let e=0;e<amountV.length;e++)void 0!==amountV[e]&&(t+=amountV[e]);return t}function getStockV(t,e,i){$.ajax({url:SITE_URL+"/get-stock",data:{item_option_id:t,option_label:e,_token:token},type:"POST",dataType:"JSON",success:function(e){if(1==e.status)if(1==e.is_track_inventory){e.quantity>0?enableAddToCartV(t):disableAddToCart();let a="";"0"==e.is_hide_stock&&(a=jsLang("Stock left")+": "+getDecimalNumberFormat(e.quantity)),$("#stock_qtyV-"+i).removeClass("display-none"),$("#stock_qtyV-"+i).text(a)}else enableAddToCartV(t);else enableAddToCartV(t)}})}function enableAddToCartV(t){let e=[];$.each($(".option_priceV"),function(t,i){e[t]=void 0!==$(this).find(":selected").attr("data-optionRealId")?$(this).find(":selected").attr("data-optionRealId"):$(this).attr("data-optionRealId")}),jQuery.inArray(t,e)||($("#item-add-to-cartV").addClass("add-to-cart"),$("#item-add-to-cartV").removeClass("disable_a_href"))}function multipleCalcV(t,e){let i,a,o=0,d=0;if("multiple_select"==e)i=multipleSelectPrice,a=multipleSelectPriceType;else{let e=[],o=[];$(t+":checkbox:checked").each(function(t){e[t]=$(this).attr("data-price"),o[t]=$(this).attr("data-type")}),i=e,a=o}return $.each(i,function(t,e){"Percent"==a[t]?d+=mainPriceV*parseFloat(e)/100:d+=parseFloat(e),o+=mainPriceV}),{total:o,extra:d}}if($(document).on("change",".option_priceV",function(){let t,e,i,a,o,d;o=void 0!==$(this).find(":selected").attr("data-inputType")?$(this).find(":selected").attr("data-inputType"):$(this).attr("data-inputType"),a=void 0!==$(this).find(":selected").attr("data-option")?$(this).find(":selected").attr("data-option"):$(this).attr("data-option"),$("#required-msgV-"+a).addClass("display-none"),"checkbox"==o||"checkbox_custom"==o||"radio"==o||"radio_custom"==o?$(this).prop("checked")?changePriceV(t=void 0!==$(this).find(":selected").attr("data-price")?$(this).find(":selected").attr("data-price"):$(this).attr("data-price"),e=void 0!==$(this).find(":selected").attr("data-type")?$(this).find(":selected").attr("data-type"):$(this).attr("data-type"),a,i=void 0!==$(this).find(":selected").attr("data-optionId")?$(this).find(":selected").attr("data-optionId"):$(this).attr("data-optionId"),o):(d=null,$(this).prop("checked",!1)&&(d=void 0!==$(this).find(":selected").attr("data-price")?$(this).find(":selected").attr("data-price"):$(this).attr("data-price")),changePriceV(t,e,a,i,o,d)):changePriceV(t=void 0!==$(this).find(":selected").attr("data-price")?$(this).find(":selected").attr("data-price"):$(this).attr("data-price"),e=void 0!==$(this).find(":selected").attr("data-type")?$(this).find(":selected").attr("data-type"):$(this).attr("data-type"),a,i=void 0!==$(this).find(":selected").attr("data-optionId")?$(this).find(":selected").attr("data-optionId"):$(this).attr("data-optionId"),o),$(this).prop("checked")||""!=$(this).find(":selected").val()?($(this).prop("checked")||$("#stock_qtyV-"+a).addClass("display-none"),(void 0!==$(this).find(":selected").val()||$(this).prop("checked"))&&getStockV(void 0!==$(this).find(":selected").attr("data-optionRealId")?$(this).find(":selected").attr("data-optionRealId"):$(this).attr("data-optionRealId"),void 0!==$(this).find(":selected").val()?$(this).find(":selected").val():$(this).val(),a)):$("#stock_qtyV-"+a).addClass("display-none")}),$(".singleCheckBoxV").on("click",function(){let t=$(this).attr("data-optionId"),e=$(this).attr("data-option");$(".multiChkV-"+e).each(function(){$(this).attr("data-optionId")!=t&&$(this).prop("checked",!1)})}),setTimeout(()=>{$(".product-thumbs").css("opacity","1")},5),$(document).on("mousemove",".zoom",function(t){var e,i,a,o;console.log(t);var d=t.currentTarget;e=t.offsetX?t.offsetX:t.touches[0].pageX,t.offsetY?i=t.offsetY:e=t.touches[0].pageX,a=e/d.offsetWidth*100,o=i/d.offsetHeight*100,d.style.backgroundPosition=a+"% "+o+"%"}),$(".product-left").length){var productSlider=new Swiper(".product-slider",{spaceBetween:0,centeredSlides:!0,loop:!0,direction:"horizontal",loopedSlides:6,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},resizeObserver:!0}),productThumbs=new Swiper(".product-thumbs",{spaceBetween:17,centeredSlides:!0,loop:!0,slideToClickedSlide:!0,direction:"horizontal",slidesPerView:"auto",loopedSlides:slideImagecount});productSlider.controller.control=productThumbs,productThumbs.controller.control=productSlider}
