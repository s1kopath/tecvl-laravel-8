"use strict";if($(".main-body .page-wrapper").find("#order-checkout-container").length){g();var c,d="old";function a(){$(".selected-tab").each(function(){$(this).hasClass("is-active")&&(d=$(this).attr("data-tab"),$("#selected_tab").val(d))})}function e(){$(".address-form").hide(),$.each($(".required-field"),function(){$(this).prop("required",!1),$(this).removeAttr("oninvalid"),$(this).next("label").remove(),$(this).attr("readonly",!0)}),$.each($(".has-validation-error"),function(){$(this).removeClass("has-validation-error")})}function f(){$(".address-form").show(),$.each($(".required-field"),function(){$(this).prop("required",!0),$(this).attr("oninvalid","this.setCustomValidity(jsLang('This field is required.'))"),$(this).attr("readonly",!1)})}function g(){$(".address-radio").each(function(){if($(this).is(":checked")){let a=$(this).attr("data-addressId");$("#address_id").val(a),e()}})}function b(c){var a,b=document.querySelector(c.el),f=!1,d=b.querySelector(".c-tabs-nav"),g=b.querySelectorAll(".c-tabs-nav__link"),h=b.querySelectorAll(".c-tab"),i=!!c.marker&&((a=document.createElement("div")).classList.add("c-tab-nav-marker"),d.appendChild(a),a),j=0;function k(a,b){a.addEventListener("click",function(a){a.preventDefault(),e(b)})}function e(a){a>=0&&a!=j&&a<=g.length&&(g[j].classList.remove("is-active"),g[a].classList.add("is-active"),h[j].classList.remove("is-active"),h[a].classList.add("is-active"),i&&l(g[a]),j=a)}function l(a){i.style.left=a.offsetLeft+"px",i.style.width=a.offsetWidth+"px"}return{init:function(){if(!f){f=!0;for(var a=0;a<g.length;a++)k(g[a],a);i&&l(g[j])}},goToTab:e}}a(),$(document).on("keyup",".positive-int-number",function(){var a=$(this).val();$(this).val(a.replace(/[^0-9]/g,""))}),$("#default-address").on("change",function(a){$(this).is(":checked")&&$.ajax({url:SITE_URL+"/user/check-default-address",data:{user_id:userId,"_token":token},type:"POST",dataType:"JSON",success:function(a){let b=Swal.mixin({toast:!0,position:"bottom-start",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen(a){a.addEventListener("mouseenter",Swal.stopTimer),a.addEventListener("mouseleave",Swal.resumeTimer)}});1==a.status?($("#new-address").prop("checked",!1),e()):(b.fire({icon:"error",title:jsLang("Default address not found! Please create a address & make it default")}),f(),$("#default-address").prop("checked",!1))}})}),$("#addressForm").on("submit",function(a){$(".type_of_place").is(":checked")||"old"==d?($("#errorMsg").removeClass("error"),$("#errorMsg").text("")):($("#errorMsg").addClass("error"),$("#errorMsg").text(jsLang("This field is required.")),a.preventDefault())}),$("#makePayment").on("click",function(a){$(".type_of_place").is(":checked")?($("#errorMsg").removeClass("error"),$("#errorMsg").text("")):($("#errorMsg").addClass("error"),$("#errorMsg").text(jsLang("This field is required.")))}),$(".type_of_place").on("change",function(a){$(this).is(":checked")&&($("#errorMsg").removeClass("error"),$("#errorMsg").text(""))}),$(".selected-tab").on("click",function(a){"old"==(d=$(this).attr("data-tab"))?e():f(),$("#selected_tab").val(d)}),$(".address-radio").click(function(){let b=$(this).closest("div.adress-container"),f=$(this).attr("data-addressId");$("#address_id").val(f),e(),$(this).closest("div.adress-container").addClass("border-gray-12").removeClass("border-gray-2"),b.find(".s-icon").removeClass("hidden"),b.find(".ab-name, .ab-label").addClass("text-gray-12").removeClass("text-gray-10");let g=$(this).closest("div.c-tab"),d=g.children();for(let c=0;c<d.length;c++){let a=$(d[c]);a[0]!==b[0]&&(a.removeClass("border-gray-12"),a.find(".s-icon").addClass("hidden"),a.find(".ab-name, .ab-label").removeClass("text-gray-12").addClass("text-gray-10"))}}),new b({el:"#tabs",marker:!0}).init()}
