'use strict';$(".main-body .page-wrapper").find("#coupon-add-container, #coupon-edit-container, #vendor-coupon-add-container, #vendor-coupon-edit-container, #coupon-list-container, #vendor-coupon-list-container").length&&($(".select2").select2(),$("#discount_type").change(function(){"Percentage"==$(this).val()?($(".discount_amount_label").text(jsLang("Discount Percentage")),$("#discount_amount").attr("placeholder",jsLang("Discount Percentage"))):($(".discount_amount_label").text(jsLang("Discount Amount")),$("#discount_amount").attr("placeholder",jsLang("Discount Amount")))}));function discount(){$(".main-body .page-wrapper").find("#coupon-add-container, #coupon-edit-container, #vendor-coupon-add-container, #vendor-coupon-edit-container").length&&("Percentage"!=$("select[name=\"discount_type\"]").val()&&$("#max_discount").hide(),$("select[name=\"discount_type\"]").on("change",function(a){"Percentage"==a.target.value?$("#max_discount").show():$("#max_discount").hide()}))}function shop(a,b=null){$.ajax({url:SITE_URL+"/coupon/shop/"+a,type:"GET",dataType:"JSON",success:function(a){for(const c in $("#shop_id").html(""),$("#shop_id").append(`
                <option value="">${jsLang("Select One")}</option>
            `),a)a[c].id==b?$("#shop_id").append(`
                        <option value="${a[c].id}" selected>${a[c].name}</option>
                    `):$("#shop_id").append(`
                        <option value="${a[c].id}">${a[c].name}</option>
                    `)}})}if($(".main-body .page-wrapper").find("#coupon-add-container").length)if($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig()),discount(),"true"===is_active)$("#vendor_id").change(function(){var a=$(this).val()?$(this).val():0;shop(a)}),$("#shop_id").change(function(){var a=$(this).val()?$(this).val():0;$.ajax({url:SITE_URL+"/coupon/item/"+a,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})});else if($("#vendor_id").change(function(){var a=$(this).val()?$(this).val():0;$.ajax({url:SITE_URL+"/coupon/item/"+a,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option  value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})}),""!=$("#vendor_id").val()){var item_ids=[];Array.isArray(old_item)&&old_item.length&&(item_ids=old_item.map(function(a){return parseInt(a,10)}));var id=$("#vendor_id").val();$.ajax({url:SITE_URL+"/coupon/item/"+id,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option ${item_ids.includes(a.items[b].id)?"selected":""}  value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})}if($(".main-body .page-wrapper").find("#coupon-edit-container").length)if($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig($("input[name=\"start_date\"]").val())),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig($("input[name=\"end_date\"]").val())),discount(),"true"===is_active)shop($("#vendor_id").val(),shopId),$("#vendor_id").change(function(){var a=$(this).val();shop(a)}),$("#shop_id").change(function(){var a=$(this).val()?$(this).val():0;$.ajax({url:SITE_URL+"/coupon/item/"+a,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})}),$.ajax({url:SITE_URL+"/coupon/item/"+shopId,type:"GET",dataType:"JSON",data:{coupon_id:couponId},success:function(a){for(const b in $("#item_id").html(""),a.items)a.select.includes(a.items[b].id)?$("#item_id").append(`
                            <option value="${a.items[b].id}" selected>${a.items[b].name}</option>
                        `):$("#item_id").append(`
                            <option value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}});else{if(""!=old_vendor){var item_ids=[];Array.isArray(old_item)&&old_item.length&&(item_ids=old_item.map(function(a){return parseInt(a,10)}));var id=$("#vendor_id").val();$.ajax({url:SITE_URL+"/coupon/item/"+id,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option ${item_ids.includes(a.items[b].id)?"selected":""}  value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})}else $.ajax({url:SITE_URL+"/coupon/item/"+vendorId??0,type:"GET",dataType:"JSON",data:{coupon_id:couponId},success:function(a){for(const b in $("#item_id").html(""),a.items)a.select.map(Number).includes(a.items[b].id)?$("#item_id").append(`
                                <option value="${a.items[b].id}" selected>${a.items[b].name}</option>
                            `):$("#item_id").append(`
                                <option value="${a.items[b].id}">${a.items[b].name}</option>
                            `)}});$("#vendor_id").change(function(){var a=$(this).val()?$(this).val():0;$.ajax({url:SITE_URL+"/coupon/item/"+a,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                            <option value="${a.items[b].id}">${a.items[b].name}</option>
                        `)}})})}function item(a){$.ajax({url:SITE_URL+"/vendor/coupon/shop-item/"+a,type:"GET",dataType:"JSON",success:function(a){for(const b in $("#item_id").html(""),a.items)$("#item_id").append(`
                    <option value="${a.items[b].id}">${a.items[b].name}</option>
                `)}})}function oldItemSelection(){if(Array.isArray(old_item)&&old_item.length){var a=[];a=old_item.map(function(a){return parseInt(a,10)}),$.ajax({url:SITE_URL+"/coupon/shop-item/"+0,type:"GET",dataType:"JSON",success:function(b){for(const c in $("#item_id").html(""),b.items)$("#item_id").append(`
                        <option ${a.includes(b.items[c].id)?"selected":""}  value="${b.items[c].id}">${b.items[c].name}</option>
                    `)}})}}$(".main-body .page-wrapper").find("#vendor-coupon-add-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig()),discount(),"true"===is_active&&$("#shop_id").change(function(){var a=$(this).val()?$(this).val():0;item(a)}),oldItemSelection()),$(".main-body .page-wrapper").find("#vendor-coupon-edit-container").length&&($("input[name=\"start_date\"]").daterangepicker(dateSingleConfig($("input[name=\"start_date\"]").val())),$("input[name=\"end_date\"]").daterangepicker(dateSingleConfig($("input[name=\"end_date\"]").val())),discount(),"true"===is_active&&$("#shop_id").change(function(){var a=$(this).val()?$(this).val():0;item(a)}),oldItemSelection()),$(".main-body .page-wrapper").find("#coupon-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/coupon/"+this.id}),$(".main-body .page-wrapper").find("#coupon-redeem-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/coupon-redeem/"+this.id}),$(".main-body .page-wrapper").find("#vendor-coupon-list-container").length&&$(document).on("click","#csv, #pdf",function(a){a.preventDefault(),window.location=SITE_URL+"/vendor/coupon/"+this.id}),$(".coupon-submit-button").click(function(){var a=["#v-pills-general","#v-pills-restriction","#v-pills-limit"];setTimeout(()=>{for(const c in a)if($(a[c]).find(".error").length){var b=$(a[c]).attr("aria-labelledby");$("#"+b).trigger("click");break}},100)}),$("button.switch-tab").on("click",function(){$("#"+$(this).attr("data-id")).trigger("click")});
